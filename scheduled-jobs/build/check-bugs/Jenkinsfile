properties( [
    buildDiscarder(logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '100', daysToKeepStr: '', numToKeepStr: '100')),
    disableConcurrentBuilds(),
    disableResume(),
] )

def runFor(version) {
    b = build(
        job: '../aos-cd-builds/build%2Fcheck-bugs',
        parameters: [
            string(name: 'BUILD_VERSION', value: version),
            booleanParam(name: 'NOTIFY_FORUM_RELEASE', value: true)
        ],
        propagate: false,
    )
}

node() {
    checkout scm
    commonlib = load("pipeline-scripts/commonlib.groovy")
    for ( String version : commonlib.ocpVersions ) {
        echo "starting job for ocpVersion: ${version}"
        runFor(version)
    }
}
